<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </head>

  <style>
    .editable-text{
      cursor: pointer;
      width: fit-content;
    }
  </style>

  <body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script type="text/javascript" src="https://unpkg.com/babel-standalone@6/babel.js"></script>
    
    <script type="text/babel">
    
    function App() {
      const [arr, setArr] = React.useState(["text element 1", "text element 2", "text element 3"])
      const [isEditable, setIsEditable] = React.useState(true);
      const az = [1, 2, [3, 4, [5, 6, 7]], 8, "azerty"];

      function handleChange(e, j){
        setArr(arr.map((el, i) => {
          if(i === j){
            return e
          }
          else {
            return el
          }
        }))
      }

      function recursion(x){
        return (
          <ul>
            {x.map((e, i) => {
              if(Array.isArray(e)){
                return (
                  recursion(e)
                )
              }
              else {
                return (
                  <li key={e}>
                    {
                      <EditableText
                        key={e}
                        text={e}
                        

                      

                      />
                    }
                  </li>
                )
              }
            })}  
          </ul>
        )
      }

      return (
        <React.Fragment>
          <button onClick={() => setArr([...arr, "Text section"])}>
            Add text section
          </button>
          <button onClick={() => setArr([...arr, ["list item 1", "list item 2", "list item 3"]])}>
            Add list
          </button>
          <br />
          {arr.map((e, i) => 
            <React.Fragment>
              {Array.isArray(e) ? recursion(e) : <EditableText
                key={e}
                text={e}
                j={i}
                
                handleChange={handleChange}
                handleDelete={() => setArr(arr.filter((el, index) => index !== i))}
              />}
              
            </React.Fragment>
          )}
          {/*recursion(az)*/}
        </React.Fragment>
      )
    }

    function EditableText(props){
      const [isEditable, setIsEditable] = React.useState(true);
      const [text, setText] = React.useState(props.text);

      return (
        <React.Fragment>
          {isEditable ? (
            <input
              type="text"
              onChange={(e) => props.handleChange(e.target.value, props.j)}
              onBlur={() => setIsEditable(false)}
              value={text}
              autoFocus
            />
          ) : (
            <React.Fragment>
              <span onClick={() => setIsEditable(true)} className="editable-text me-5">
                {text}
              </span>
              <button onClick={props.handleDelete}>Delete</button>
            </React.Fragment>
          )}
          
          <br />
        </React.Fragment>
      )
    }

    // Render the component to the DOM
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
    </script>

  </body>

</html>